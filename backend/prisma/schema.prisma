datasource db {
    provider = "sqlite"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

model User {
    uid       String   @id @default(cuid())
    username  String?
    email     String?
    image     String?
    createdAt DateTime @default(now())
    habits    Habit[]
    logs      Log[]
    points    Points[]
}

model Habit {
    id        String   @id @default(cuid())
    name      String   @default("My habit")
    frequency Int      @default(1)
    period    String   @default("day")
    weekdays  String?
    color     String   @default("blue")
    image     String?  @default("üí™üèª")
    reminder  Boolean  @default(false)
    createdAt DateTime @default(now())
    archived  Boolean  @default(false)

    // Relations
    user   User   @relation(fields: [userId], references: [uid], onDelete: Cascade)
    userId String

    type String @default("habit")

    logs Log[]
}

model Log {
    id        String   @id @default(cuid())
    event     String   @default("done")
    createdAt DateTime @default(now())

    // Relations
    habit   Habit?  @relation(fields: [habitId], references: [id], onDelete: Cascade)
    habitId String?

    user   User   @relation(fields: [userId], references: [uid], onDelete: Cascade)
    userId String

    points Points[]
}

model Points {
    id           String @id @default(cuid())
    log          Log    @relation(fields: [logId], references: [id], onDelete: Cascade)
    logId        String
    points_added Float  @default(0)
    total_score  Float  @default(0)
    user         User   @relation(fields: [userId], references: [uid], onDelete: Cascade)
    userId       String
}
